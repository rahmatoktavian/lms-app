{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport * as React from 'react';\nimport EnsureSingleNavigator from \"./EnsureSingleNavigator\";\nimport NavigationStateContext from \"./NavigationStateContext\";\nimport StaticContainer from \"./StaticContainer\";\nimport useOptionsGetters from \"./useOptionsGetters\";\nexport default function SceneView(_ref) {\n  var screen = _ref.screen,\n      route = _ref.route,\n      navigation = _ref.navigation,\n      routeState = _ref.routeState,\n      getState = _ref.getState,\n      setState = _ref.setState,\n      options = _ref.options,\n      clearOptions = _ref.clearOptions;\n  var navigatorKeyRef = React.useRef();\n  var getKey = React.useCallback(function () {\n    return navigatorKeyRef.current;\n  }, []);\n\n  var _useOptionsGetters = useOptionsGetters({\n    key: route.key,\n    options: options,\n    navigation: navigation\n  }),\n      addOptionsGetter = _useOptionsGetters.addOptionsGetter;\n\n  var setKey = React.useCallback(function (key) {\n    navigatorKeyRef.current = key;\n  }, []);\n  var getCurrentState = React.useCallback(function () {\n    var state = getState();\n    var currentRoute = state.routes.find(function (r) {\n      return r.key === route.key;\n    });\n    return currentRoute ? currentRoute.state : undefined;\n  }, [getState, route.key]);\n  var setCurrentState = React.useCallback(function (child) {\n    var state = getState();\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      routes: state.routes.map(function (r) {\n        return r.key === route.key ? _objectSpread(_objectSpread({}, r), {}, {\n          state: child\n        }) : r;\n      })\n    }));\n  }, [getState, route.key, setState]);\n  var isInitialRef = React.useRef(true);\n  React.useEffect(function () {\n    isInitialRef.current = false;\n  });\n  React.useEffect(function () {\n    return clearOptions;\n  }, []);\n  var getIsInitial = React.useCallback(function () {\n    return isInitialRef.current;\n  }, []);\n  var context = React.useMemo(function () {\n    return {\n      state: routeState,\n      getState: getCurrentState,\n      setState: setCurrentState,\n      getKey: getKey,\n      setKey: setKey,\n      getIsInitial: getIsInitial,\n      addOptionsGetter: addOptionsGetter\n    };\n  }, [routeState, getCurrentState, setCurrentState, getKey, setKey, getIsInitial, addOptionsGetter]);\n  var ScreenComponent = screen.getComponent ? screen.getComponent() : screen.component;\n  return React.createElement(NavigationStateContext.Provider, {\n    value: context\n  }, React.createElement(EnsureSingleNavigator, null, React.createElement(StaticContainer, {\n    name: screen.name,\n    render: ScreenComponent || screen.children,\n    navigation: navigation,\n    route: route\n  }, ScreenComponent !== undefined ? React.createElement(ScreenComponent, {\n    navigation: navigation,\n    route: route\n  }) : screen.children !== undefined ? screen.children({\n    navigation: navigation,\n    route: route\n  }) : null)));\n}","map":{"version":3,"mappings":"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","names":["React","EnsureSingleNavigator","NavigationStateContext","StaticContainer","useOptionsGetters","SceneView","_ref","screen","route","navigation","routeState","getState","setState","options","clearOptions","navigatorKeyRef","useRef","getKey","useCallback","current","key","addOptionsGetter","setKey","getCurrentState","state","currentRoute","routes","find","r","undefined","setCurrentState","child","map","isInitialRef","useEffect","getIsInitial","context","useMemo","ScreenComponent","getComponent","component","Provider","value","name","render","children"],"sourceRoot":"../../src","sources":["SceneView.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty2 from \"@babel/runtime/helpers/defineProperty\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty2(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { ACTION, ALERT_TYPE, ENV } from \"../config\";\nimport { Color, getImage } from \"../service\";\nexport var Dialog = function (_React$Component) {\n  _inherits(Dialog, _React$Component);\n\n  var _super = _createSuper(Dialog);\n\n  function Dialog(props) {\n    var _this2;\n\n    _classCallCheck(this, Dialog);\n\n    var _this;\n\n    _this2 = _super.call(this, props);\n    _this = _assertThisInitialized(_this2);\n\n    _defineProperty(_assertThisInitialized(_this2), \"_timeout\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this2), \"_opacity\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this2), \"_positionDialog\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this2), \"_popupHeight\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this2), \"componentDidUpdate\", function (prevProps) {\n      if (prevProps.isDark !== _this2.props.isDark) {\n        _this2.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            styles: __styles(_this2.props.isDark)\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_open\", function () {\n      var _ref3 = _asyncToGenerator(function* (config) {\n        if (_this2.state.visible) {\n          if (_this2._timeout) {\n            clearTimeout(_this2._timeout);\n          }\n\n          yield _this2._startAnimation(ACTION.CLOSE, false);\n          yield new Promise(function (resolve) {\n            return _this2.setState(function (prevState) {\n              return _objectSpread(_objectSpread({}, prevState), {}, {\n                config: config\n              });\n            }, resolve);\n          });\n          yield _this2._startAnimation(ACTION.OPEN);\n          return;\n        }\n\n        _this2.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            visible: true,\n            config: config\n          });\n        });\n      });\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this2), \"_close\", _asyncToGenerator(function* () {\n      var _this$state$config;\n\n      if (!_this2.state.visible) {\n        return;\n      }\n\n      if (_this2._timeout) {\n        clearTimeout(_this2._timeout);\n      }\n\n      yield _this2._startAnimation(ACTION.CLOSE);\n      var onHide = (_this$state$config = _this2.state.config) === null || _this$state$config === void 0 ? void 0 : _this$state$config.onHide;\n      yield new Promise(function (resolve) {\n        return _this2.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            config: undefined,\n            visible: false\n          });\n        }, resolve);\n      });\n      onHide === null || onHide === void 0 ? void 0 : onHide();\n    }));\n\n    _defineProperty(_assertThisInitialized(_this2), \"_showModalHandler\", _asyncToGenerator(function* () {\n      var _this$state$config2, _this$state$config3, _this$props$config, _onShow, _ref;\n\n      yield _this2._startAnimation(ACTION.OPEN);\n      var autoClose = ((_this$state$config2 = _this2.state.config) === null || _this$state$config2 === void 0 ? void 0 : _this$state$config2.autoClose) !== undefined ? (_this$state$config3 = _this2.state.config) === null || _this$state$config3 === void 0 ? void 0 : _this$state$config3.autoClose : (_this$props$config = _this2.props.config) === null || _this$props$config === void 0 ? void 0 : _this$props$config.autoClose;\n\n      if (autoClose) {\n        var duration = typeof autoClose === 'number' ? autoClose : ENV.AUTO_CLOSE;\n        _this2._timeout = setTimeout(function () {\n          _this2._close();\n        }, duration);\n      }\n\n      (_onShow = (_ref = _this2.state.config).onShow) === null || _onShow === void 0 ? void 0 : _onShow.call(_ref);\n    }));\n\n    _defineProperty(_assertThisInitialized(_this2), \"_startAnimation\", function (action) {\n      var opacity = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var open = action === ACTION.OPEN;\n      var animations = [opacity ? Animated.timing(_this._opacity, {\n        toValue: action === ACTION.OPEN ? 1 : 0,\n        duration: 300,\n        useNativeDriver: false\n      }) : null, Animated[open ? 'spring' : 'timing'](_this._positionDialog, _objectSpread(_objectSpread({\n        toValue: open ? ENV.WINDOWS.HEIGHT / 2 - _this._popupHeight / 2 : ENV.WINDOWS.HEIGHT + 30\n      }, open ? {\n        bounciness: 12\n      } : {\n        duration: 250\n      }), {}, {\n        useNativeDriver: true\n      }))].filter(Boolean);\n\n      if (!open) {\n        animations = animations.reverse();\n      }\n\n      return new Promise(function (resolve) {\n        Animated.sequence(animations).start(function () {\n          return resolve();\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_buttonRender\", function () {\n      var styles = _this2.state.styles;\n      var _this2$state$config = _this2.state.config,\n          type = _this2$state$config.type,\n          onPressButton = _this2$state$config.onPressButton,\n          button = _this2$state$config.button;\n\n      if (button) {\n        return React.createElement(TouchableOpacity, {\n          style: StyleSheet.flatten([styles.button, styles[type]]),\n          onPress: onPressButton != null ? onPressButton : _this2._close\n        }, React.createElement(Text, {\n          style: styles.buttonLabel\n        }, button));\n      }\n\n      return React.createElement(React.Fragment, null);\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_OverlayCloseRender\", function () {\n      var _this$state$config4, _this$props$config2;\n\n      if (((_this$state$config4 = _this2.state.config) === null || _this$state$config4 === void 0 ? void 0 : _this$state$config4.closeOnOverlayTap) === false ? false : ((_this$props$config2 = _this2.props.config) === null || _this$props$config2 === void 0 ? void 0 : _this$props$config2.closeOnOverlayTap) !== false) {\n        return React.createElement(TouchableOpacity, {\n          onPressIn: _this2._close,\n          style: {\n            flex: 1\n          }\n        });\n      }\n\n      return React.createElement(React.Fragment, null);\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"_CardRender\", function () {\n      if (!_this2.state.config) {\n        return React.createElement(React.Fragment, null);\n      }\n\n      var _this2$state = _this2.state,\n          styles = _this2$state.styles,\n          _this2$state$config2 = _this2$state.config,\n          title = _this2$state$config2.title,\n          type = _this2$state$config2.type,\n          textBody = _this2$state$config2.textBody;\n\n      var _assertThisInitialize = _assertThisInitialized(_this2),\n          _buttonRender = _assertThisInitialize._buttonRender;\n\n      return React.createElement(Animated.View, {\n        onLayout: function onLayout(_ref2) {\n          var height = _ref2.nativeEvent.layout.height;\n          return _this2._popupHeight = height;\n        },\n        style: StyleSheet.flatten([styles.cardContainer, {\n          transform: [{\n            translateY: _this2._positionDialog\n          }]\n        }])\n      }, React.createElement(View, {\n        style: styles.backendImage\n      }), React.createElement(Image, {\n        source: getImage(type),\n        resizeMode: \"contain\",\n        style: StyleSheet.flatten([styles.image, styles[type + \"Image\"]])\n      }), React.createElement(View, {\n        style: styles.cardBody\n      }, title && React.createElement(Text, {\n        style: styles.titleLabel\n      }, title), textBody && React.createElement(Text, {\n        style: styles.descLabel\n      }, textBody)), React.createElement(View, {\n        style: styles.cardFooter\n      }, React.createElement(_buttonRender, null)));\n    });\n\n    _defineProperty(_assertThisInitialized(_this2), \"render\", function () {\n      var _this2$state2 = _this2.state,\n          visible = _this2$state2.visible,\n          styles = _this2$state2.styles;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this2),\n          _OverlayCloseRender = _assertThisInitialize2._OverlayCloseRender,\n          _CardRender = _assertThisInitialize2._CardRender;\n\n      return React.createElement(Modal, {\n        transparent: true,\n        visible: visible,\n        animated: false,\n        onShow: _this2._showModalHandler\n      }, React.createElement(Animated.View, {\n        style: StyleSheet.flatten([styles.backgroundContainer, {\n          opacity: _this2._opacity\n        }])\n      }), React.createElement(_OverlayCloseRender, null), React.createElement(_CardRender, null));\n    });\n\n    _this2._opacity = new Animated.Value(0);\n    _this2._positionDialog = new Animated.Value(ENV.WINDOWS.HEIGHT + 30);\n    _this2._popupHeight = 0;\n    _this2.state = {\n      styles: __styles(props.isDark),\n      visible: false\n    };\n    return _this2;\n  }\n\n  return _createClass(Dialog);\n}(React.Component);\n\n_defineProperty(Dialog, \"instance\", React.createRef());\n\n_defineProperty(Dialog, \"show\", function (args) {\n  var _Dialog$instance$curr;\n\n  (_Dialog$instance$curr = Dialog.instance.current) === null || _Dialog$instance$curr === void 0 ? void 0 : _Dialog$instance$curr._open(args);\n});\n\n_defineProperty(Dialog, \"hide\", function () {\n  var _Dialog$instance$curr2;\n\n  (_Dialog$instance$curr2 = Dialog.instance.current) === null || _Dialog$instance$curr2 === void 0 ? void 0 : _Dialog$instance$curr2._close();\n});\n\nvar __styles = function __styles(isDark) {\n  var _StyleSheet$create;\n\n  return StyleSheet.create((_StyleSheet$create = {\n    backgroundContainer: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n      backgroundColor: '#00000070'\n    }),\n    cardContainer: {\n      alignSelf: 'center',\n      maxWidth: 400,\n      width: '80%',\n      minHeight: 250,\n      borderRadius: 24,\n      paddingHorizontal: 12,\n      paddingTop: 50,\n      paddingBottom: 24,\n      position: 'absolute',\n      backgroundColor: Color.get('card', isDark)\n    },\n    cardBody: {\n      flex: 1,\n      justifyContent: 'space-evenly',\n      alignItems: 'center',\n      overflow: 'hidden'\n    },\n    cardFooter: {},\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 20,\n      color: Color.get('label', isDark)\n    },\n    descLabel: {\n      textAlign: 'center',\n      color: Color.get('label', isDark)\n    },\n    button: {\n      borderRadius: 50,\n      height: 40,\n      width: 130,\n      justifyContent: 'center',\n      alignItems: 'center',\n      alignSelf: 'center',\n      marginTop: 12\n    },\n    buttonLabel: {\n      color: '#fff',\n      fontWeight: 'bold',\n      fontSize: 16\n    }\n  }, _defineProperty2(_StyleSheet$create, ALERT_TYPE.SUCCESS, {\n    backgroundColor: Color.get('success', isDark)\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.DANGER, {\n    backgroundColor: Color.get('danger', isDark)\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.WARNING, {\n    backgroundColor: Color.get('warning', isDark)\n  }), _defineProperty2(_StyleSheet$create, \"backendImage\", {\n    position: 'absolute',\n    alignSelf: 'center',\n    justifyContent: 'center',\n    height: 50,\n    width: 50,\n    backgroundColor: '#FBFBFB',\n    borderRadius: 100,\n    marginTop: -10\n  }), _defineProperty2(_StyleSheet$create, \"image\", {\n    alignSelf: 'center',\n    width: 80,\n    aspectRatio: 1,\n    position: 'absolute',\n    top: -30\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.SUCCESS + \"Image\", {\n    tintColor: Color.get('success', isDark)\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.DANGER + \"Image\", {\n    tintColor: Color.get('danger', isDark)\n  }), _defineProperty2(_StyleSheet$create, ALERT_TYPE.WARNING + \"Image\", {\n    tintColor: Color.get('warning', isDark)\n  }), _StyleSheet$create));\n};","map":{"version":3,"mappings":"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","names":["React","ACTION","ALERT_TYPE","ENV","Color","getImage","Dialog","constructor","props","_this","_defineProperty","prevProps","isDark","setState","prevState","styles","__styles","config","state","visible","_timeout","clearTimeout","_startAnimation","CLOSE","Promise","resolve","OPEN","onHide","_this$state$config","undefined","autoClose","_this$state$config3","_this$props$config","duration","AUTO_CLOSE","setTimeout","_close","onShow","action","opacity","open","animations","Animated","timing","_opacity","toValue","useNativeDriver","_positionDialog","WINDOWS","HEIGHT","_popupHeight","bounciness","filter","Boolean","reverse","sequence","start","type","onPressButton","button","TouchableOpacity","style","StyleSheet","flatten","onPress","Text","buttonLabel","closeOnOverlayTap","onPressIn","flex","title","textBody","_buttonRender","View","onLayout","height","nativeEvent","layout","cardContainer","transform","translateY","backendImage","Image","source","resizeMode","image","cardBody","titleLabel","descLabel","cardFooter","_OverlayCloseRender","_CardRender","Modal","transparent","animated","_showModalHandler","backgroundContainer","Value","Component","createRef","args","instance","current","_open","create","absoluteFillObject","backgroundColor","alignSelf","maxWidth","width","minHeight","borderRadius","paddingHorizontal","paddingTop","paddingBottom","position","get","justifyContent","alignItems","overflow","fontWeight","fontSize","color","textAlign","marginTop","SUCCESS","DANGER","WARNING","aspectRatio","top","tintColor"],"sources":["Dialog.tsx"],"sourcesContent":["import * as React from 'react';\nimport { Animated, Image, Modal, StyleSheet, Text, TouchableOpacity, View } from 'react-native';\nimport { ACTION, ALERT_TYPE, ENV } from '../config';\nimport { Color, getImage } from '../service';\n\nexport type IConfigDialog = {\n  type: ALERT_TYPE;\n  title?: string;\n  textBody?: string;\n  button?: string;\n  autoClose?: number | boolean;\n  closeOnOverlayTap?: boolean;\n  onPressButton?: () => void;\n  onShow?: () => void;\n  onHide?: () => void;\n};\n\ntype IProps = {\n  isDark: boolean;\n  config?: Pick<IConfigDialog, 'closeOnOverlayTap' | 'autoClose'>;\n};\n\ntype IState = {\n  styles: ReturnType<typeof __styles>;\n  overlayClose?: boolean;\n  visible: boolean;\n  config?: IConfigDialog;\n};\n\nexport class Dialog extends React.Component<IProps, IState> {\n  /**\n   * @type {React.RefObject<Dialog>}\n   */\n  public static instance: React.RefObject<Dialog> = React.createRef();\n\n  /**\n   * @param {IConfig} args\n   */\n  public static show = (args: IConfigDialog): void => {\n    Dialog.instance.current?._open(args);\n  };\n\n  /**\n   *\n   */\n  public static hide = (): void => {\n    Dialog.instance.current?._close();\n  };\n\n  private _timeout?: NodeJS.Timeout;\n\n  /**\n   * @type {Animated.Value}\n   * @private\n   */\n  private readonly _opacity: Animated.Value;\n\n  /**\n   * @type {Animated.Value}\n   * @private\n   */\n  private readonly _positionDialog: Animated.Value;\n\n  /**\n   * @type {number}\n   * @private\n   */\n  private _popupHeight: number;\n\n  /**\n   * @param {IProps} props\n   */\n  constructor(props: IProps) {\n    super(props);\n    this._opacity = new Animated.Value(0);\n    this._positionDialog = new Animated.Value(ENV.WINDOWS.HEIGHT + 30);\n    this._popupHeight = 0;\n\n    this.state = {\n      styles: __styles(props.isDark),\n      visible: false,\n    };\n  }\n\n  /**\n   * @param {Readonly<IProps>} prevProps\n   */\n  public componentDidUpdate = (prevProps: Readonly<IProps>): void => {\n    if (prevProps.isDark !== this.props.isDark) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState((prevState) => ({ ...prevState, styles: __styles(this.props.isDark) }));\n    }\n  };\n\n  /**\n   * @param {IConfig} config\n   */\n  private _open = async (config: IConfigDialog): Promise<void> => {\n    if (this.state.visible) {\n      if (this._timeout) {\n        clearTimeout(this._timeout);\n      }\n      await this._startAnimation(ACTION.CLOSE, false);\n      await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, config }), resolve));\n      await this._startAnimation(ACTION.OPEN);\n      return;\n    }\n\n    this.setState((prevState) => ({ ...prevState, visible: true, config }));\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _close = async (): Promise<void> => {\n    if (!this.state.visible) {\n      return;\n    }\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    await this._startAnimation(ACTION.CLOSE);\n    const onHide = this.state.config?.onHide;\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, config: undefined, visible: false }), resolve));\n    onHide?.();\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _showModalHandler = async (): Promise<void> => {\n    await this._startAnimation(ACTION.OPEN);\n    const autoClose = this.state.config?.autoClose !== undefined ? this.state.config?.autoClose : this.props.config?.autoClose;\n    if (autoClose) {\n      const duration = typeof autoClose === 'number' ? autoClose : ENV.AUTO_CLOSE;\n      this._timeout = setTimeout(() => {\n        this._close();\n      }, duration);\n    }\n    this.state.config!.onShow?.();\n  };\n\n  /**\n   * @param {ACTION} action\n   * @param opacity\n   * @return {Promise<void>}\n   */\n  private _startAnimation = (action: ACTION, opacity: boolean = true): Promise<void> => {\n    const open = action === ACTION.OPEN;\n\n    let animations = [\n      opacity\n        ? Animated.timing(this._opacity, {\n            toValue: action === ACTION.OPEN ? 1 : 0,\n            duration: 300,\n            useNativeDriver: false,\n          })\n        : null!,\n      Animated[open ? 'spring' : 'timing'](this._positionDialog, {\n        toValue: open ? ENV.WINDOWS.HEIGHT / 2 - this._popupHeight / 2 : ENV.WINDOWS.HEIGHT + 30,\n        ...(open ? { bounciness: 12 } : { duration: 250 }),\n        useNativeDriver: true,\n      }),\n    ].filter(Boolean);\n\n    if (!open) {\n      animations = animations.reverse();\n    }\n\n    return new Promise((resolve) => {\n      Animated.sequence(animations).start(() => resolve());\n    });\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  private _buttonRender = (): JSX.Element => {\n    const { styles } = this.state;\n    const { type, onPressButton, button } = this.state.config!;\n    if (button) {\n      return (\n        <TouchableOpacity style={StyleSheet.flatten([styles.button, styles[type]])} onPress={onPressButton ?? this._close}>\n          <Text style={styles.buttonLabel}>{button}</Text>\n        </TouchableOpacity>\n      );\n    }\n    return <></>;\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  private _OverlayCloseRender = (): JSX.Element => {\n    if (this.state.config?.closeOnOverlayTap === false ? false : this.props.config?.closeOnOverlayTap !== false) {\n      // eslint-disable-next-line react-native/no-inline-styles\n      return <TouchableOpacity onPressIn={this._close} style={{ flex: 1 }} />;\n    }\n    return <></>;\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  private _CardRender = (): JSX.Element => {\n    if (!this.state.config) {\n      return <></>;\n    }\n\n    const {\n      styles,\n      config: { title, type, textBody },\n    } = this.state;\n    const { _buttonRender } = this;\n    return (\n      <Animated.View\n        onLayout={({\n          nativeEvent: {\n            layout: { height },\n          },\n        }) => (this._popupHeight = height)}\n        style={StyleSheet.flatten([styles.cardContainer, { transform: [{ translateY: this._positionDialog }] }])}\n      >\n        <View style={styles.backendImage} />\n        <Image source={getImage(type)} resizeMode=\"contain\" style={StyleSheet.flatten([styles.image, styles[`${type}Image`]])} />\n        <View style={styles.cardBody}>\n          {title && <Text style={styles.titleLabel}>{title}</Text>}\n          {textBody && <Text style={styles.descLabel}>{textBody}</Text>}\n        </View>\n        <View style={styles.cardFooter}>\n          <_buttonRender />\n        </View>\n      </Animated.View>\n    );\n  };\n\n  /**\n   * @return {JSX.Element}\n   */\n  public render = (): JSX.Element => {\n    const { visible, styles } = this.state;\n    const { _OverlayCloseRender, _CardRender } = this;\n    return (\n      <Modal transparent={true} visible={visible} animated={false} onShow={this._showModalHandler}>\n        <Animated.View style={StyleSheet.flatten([styles.backgroundContainer, { opacity: this._opacity }])} />\n        <_OverlayCloseRender />\n        <_CardRender />\n      </Modal>\n    );\n  };\n}\n\nconst __styles = (isDark: boolean) =>\n  StyleSheet.create({\n    backgroundContainer: {\n      ...StyleSheet.absoluteFillObject,\n      backgroundColor: '#00000070',\n    },\n    cardContainer: {\n      alignSelf: 'center',\n      maxWidth: 400,\n      width: '80%',\n      minHeight: 250,\n      borderRadius: 24,\n      paddingHorizontal: 12,\n      paddingTop: 50,\n      paddingBottom: 24,\n      position: 'absolute',\n      backgroundColor: Color.get('card', isDark),\n    },\n\n    cardBody: {\n      flex: 1,\n      justifyContent: 'space-evenly',\n      alignItems: 'center',\n      overflow: 'hidden',\n    },\n    cardFooter: {},\n\n    titleLabel: {\n      fontWeight: 'bold',\n      fontSize: 20,\n      color: Color.get('label', isDark),\n    },\n    descLabel: {\n      textAlign: 'center',\n      color: Color.get('label', isDark),\n    },\n    button: {\n      borderRadius: 50,\n      height: 40,\n      width: 130,\n      justifyContent: 'center',\n      alignItems: 'center',\n      alignSelf: 'center',\n      marginTop: 12,\n    },\n    buttonLabel: {\n      color: '#fff',\n      fontWeight: 'bold',\n      fontSize: 16,\n    },\n    [ALERT_TYPE.SUCCESS]: {\n      backgroundColor: Color.get('success', isDark),\n    },\n    [ALERT_TYPE.DANGER]: {\n      backgroundColor: Color.get('danger', isDark),\n    },\n    [ALERT_TYPE.WARNING]: {\n      backgroundColor: Color.get('warning', isDark),\n    },\n    backendImage: {\n      position: 'absolute',\n      alignSelf: 'center',\n      justifyContent: 'center',\n      height: 50,\n      width: 50,\n      backgroundColor: '#FBFBFB',\n      borderRadius: 100,\n      marginTop: -10,\n    },\n    image: {\n      alignSelf: 'center',\n      width: 80,\n      aspectRatio: 1,\n      position: 'absolute',\n      top: -30,\n    },\n\n    [`${ALERT_TYPE.SUCCESS}Image`]: {\n      tintColor: Color.get('success', isDark),\n    },\n    [`${ALERT_TYPE.DANGER}Image`]: {\n      tintColor: Color.get('danger', isDark),\n    },\n    [`${ALERT_TYPE.WARNING}Image`]: {\n      tintColor: Color.get('warning', isDark),\n    },\n  });\n"]},"metadata":{},"sourceType":"module"}
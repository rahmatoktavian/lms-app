{"ast":null,"code":"import _defineProperty2 from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty2(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as React from 'react';\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport { ToastRender } from \"./ToastRender\";\nexport var Toast = function (_React$Component) {\n  _inherits(Toast, _React$Component);\n\n  var _super = _createSuper(Toast);\n\n  function Toast(props) {\n    var _this;\n\n    _classCallCheck(this, Toast);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"_open\", function () {\n      var _ref = _asyncToGenerator(function* (data) {\n        var _this$state$data, _this$state$data$onSh;\n\n        var _ref2 = _this.props.config || {},\n            titleStyle = _ref2.titleStyle,\n            textBodyStyle = _ref2.textBodyStyle;\n\n        var timeout = typeof data.autoClose === 'number' ? data.autoClose : data.autoClose === false ? 0 : 5000;\n        yield new Promise(function (resolve) {\n          return _this.setState(function (prevState) {\n            return _objectSpread(_objectSpread({}, prevState), {}, {\n              data: _objectSpread(_objectSpread({\n                titleStyle: titleStyle,\n                textBodyStyle: textBodyStyle\n              }, data), {}, {\n                description: data.textBody,\n                timeout: timeout\n              })\n            });\n          }, resolve);\n        });\n        (_this$state$data = _this.state.data) === null || _this$state$data === void 0 ? void 0 : (_this$state$data$onSh = _this$state$data.onShow) === null || _this$state$data$onSh === void 0 ? void 0 : _this$state$data$onSh.call(_this$state$data);\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_close\", _asyncToGenerator(function* () {\n      _this._closedHandler();\n    }));\n\n    _defineProperty(_assertThisInitialized(_this), \"_closedHandler\", _asyncToGenerator(function* () {\n      var _this$state$data2;\n\n      var onHide = (_this$state$data2 = _this.state.data) === null || _this$state$data2 === void 0 ? void 0 : _this$state$data2.onHide;\n      yield new Promise(function (resolve) {\n        return _this.setState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            data: null\n          });\n        }, resolve);\n      });\n      onHide === null || onHide === void 0 ? void 0 : onHide();\n    }));\n\n    _this.state = {\n      data: null\n    };\n    return _this;\n  }\n\n  _createClass(Toast, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = this.state.data;\n\n      if (!data) {\n        return null;\n      }\n\n      var _this$props = this.props,\n          isDark = _this$props.isDark,\n          configGeneral = _this$props.config;\n      return React.createElement(SafeAreaInsetsContext.Consumer, null, function (insets) {\n        return React.createElement(ToastRender, _extends({}, data, {\n          isDark: isDark,\n          paddingTop: insets === null || insets === void 0 ? void 0 : insets.top,\n          configGeneral: configGeneral,\n          onClose: _this2._closedHandler\n        }));\n      });\n    }\n  }]);\n\n  return Toast;\n}(React.Component);\n\n_defineProperty(Toast, \"instance\", React.createRef());\n\n_defineProperty(Toast, \"show\", function (args) {\n  var _Toast$instance$curre;\n\n  (_Toast$instance$curre = Toast.instance.current) === null || _Toast$instance$curre === void 0 ? void 0 : _Toast$instance$curre._open(args);\n});\n\n_defineProperty(Toast, \"hide\", function () {\n  var _Toast$instance$curre2;\n\n  (_Toast$instance$curre2 = Toast.instance.current) === null || _Toast$instance$curre2 === void 0 ? void 0 : _Toast$instance$curre2._close();\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,SAASC,qBAAT,QAAsC,gCAAtC;AAEA,SAASC,WAAT;AA2BA,WAAaC,KAAb;EAAA;;EAAA;;EAoBEC,eAAYC,KAAZD,EAA2B;IAAA;;IAAA;;IACzB,0BAAMC,KAAN;;IADyBC;MAAA,6BAWX,WAAOC,IAAP,EAA6C;QAAA;;QAC3D,YAAsC,MAAKF,KAAL,CAAWG,MAAX,IAAqB,EAA3D;QAAA,IAAQC,UAAR,SAAQA,UAAR;QAAA,IAAoBC,aAApB,SAAoBA,aAApB;;QACA,IAAMC,OAAe,GAAG,OAAOJ,IAAI,CAACK,SAAZ,KAA0B,QAA1B,GAAqCL,IAAI,CAACK,SAA1C,GAAsDL,IAAI,CAACK,SAALL,KAAmB,KAAnBA,GAA2B,CAA3BA,GAA+B,IAA7G;QACA,MAAM,IAAIM,OAAJ,CAAmBC,iBAAD;UAAA,OACtB,MAAKC,QAAL,CAAeC,mBAAD;YAAA,uCAAqBA,SAArB;cAAgCT,IAAI;gBAAIE,UAAF,EAAEA,UAAJ;gBAAgBC,aAAd,EAAcA;cAAhB,GAAkCH,IAAlC;gBAAwCU,WAAW,EAAEV,IAAI,CAACW,QAA1D;gBAAoEP;cAApE;YAApC;UAAA,CAAd,EAAoIG,OAApI,CADsB;QAAA,CAAlB,CAAN;QAGA,0BAAKK,KAAL,CAAWZ,IAAX,+FAAiBa,MAAjB;MAjByB;;MAAA;QAAA;MAAA;IAAA;;IAAAd,2EAuBV,aAA2B;MAC1C,MAAKe,cAAL;IAxByB;;IAAAf,mFA2BF,aAA2B;MAAA;;MAClD,IAAMgB,MAAM,wBAAG,MAAKH,KAAL,CAAWZ,IAAd,sDAAGgB,kBAAiBD,MAAhC;MACA,MAAM,IAAIT,OAAJ,CAAmBC,iBAAD;QAAA,OAAa,MAAKC,QAAL,CAAeC,mBAAD;UAAA,uCAAqBA,SAArB;YAAgCT,IAAI,EAAE;UAAtC;QAAA,CAAd,EAA6DO,OAA7D,CAAb;MAAA,CAAlB,CAAN;MACAQ,MAAM,SAANA,UAAM,WAANA,kBAAM,EAANA;IA9ByB;;IAEzB,MAAKH,KAAL,GAAa;MACXZ,IAAI,EAAE;IADK,CAAb;IAFyB;EAK1B;;EAzBH;IAAA;IAAA,OAqDSiB,kBAAS;MAAA;;MACd,IAAQjB,IAAR,GAAiB,KAAKY,KAAtB,CAAQZ,IAAR;;MACA,IAAI,CAACA,IAAL,EAAW;QACT,OAAO,IAAP;MACD;;MACD,kBAA0C,KAAKF,KAA/C;MAAA,IAAQoB,MAAR,eAAQA,MAAR;MAAA,IAAwBC,aAAxB,eAAgBlB,MAAhB;MACA,OACER,oBAACC,qBAAD,CAAuB0B,QAAvB,QACIC,gBAAD;QAAA,OAAY5B,oBAACE,WAAD,eAAiBK,IAAjB;UAAuBkB,MAAM,EAAEA,MAA/B;UAAuCI,UAAU,EAAED,MAAF,SAAEA,UAAF,WAAEA,GAAF,MAAEA,SAAM,CAAEE,GAA3D;UAAgEJ,aAAa,EAAEA,aAA/E;UAA8FK,OAAO,EAAE,OAAKV;QAA5G,GAAZ;MAAA,CADH,CADF;IAKD;EAhEH;;EAAA;AAAA,EAA2BrB,KAAK,CAACgC,SAAjC;;gBAAa7B,O,YAIsCH,KAAK,CAACiC,SAANjC;;gBAJtCG,O,QASW+B,cAAD,EAA8B;EAAA;;EACjD,8BAAK,CAACC,QAANhC,CAAeiC,OAAf,gFAAwBC,KAAxB,CAA8BH,IAA9B;;;gBAVS/B,O,QAgBU,YAAY;EAAA;;EAC/B,+BAAK,CAACgC,QAANhC,CAAeiC,OAAf,kFAAwBE,MAAxB","names":["React","SafeAreaInsetsContext","ToastRender","Toast","constructor","props","_defineProperty","data","config","titleStyle","textBodyStyle","timeout","autoClose","Promise","resolve","setState","prevState","description","textBody","state","onShow","_closedHandler","onHide","_this$state$data2","render","isDark","configGeneral","Consumer","insets","paddingTop","top","onClose","Component","createRef","args","instance","current","_open","_close"],"sources":["Toast.tsx"],"sourcesContent":["import * as React from 'react';\nimport { StyleProp, TextStyle } from 'react-native';\nimport { SafeAreaInsetsContext } from 'react-native-safe-area-context';\nimport { ALERT_TYPE } from '../config';\nimport { ToastRender } from './ToastRender';\n\n//export type IModelFunc = (args: { isDark: boolean; type?: ALERT_TYPE; title?: string; description?: string }) => ReactElement;\n\nexport type IConfigToast = {\n  autoClose?: number | boolean;\n\n  type?: ALERT_TYPE;\n  title?: string;\n  textBody?: string;\n  titleStyle?: StyleProp<TextStyle>;\n  textBodyStyle?: StyleProp<TextStyle>;\n  onPress?: () => void;\n  onShow?: () => void;\n  onHide?: () => void;\n};\n\ntype IProps = {\n  isDark: boolean;\n  config?: Pick<IConfigToast, 'autoClose' | 'titleStyle' | 'textBodyStyle'>;\n};\n\ntype IState = {\n  overlayClose?: boolean;\n  data: null | (IConfigToast & { timeout: number });\n};\n\nexport class Toast extends React.Component<IProps, IState> {\n  /**\n   * @type {React.RefObject<Toast>}\n   */\n  public static instance: React.RefObject<Toast> = React.createRef();\n\n  /**\n   * @param {IConfigToast} args\n   */\n  public static show = (args: IConfigToast): void => {\n    Toast.instance.current?._open(args);\n  };\n\n  /**\n   *\n   */\n  public static hide = (): void => {\n    Toast.instance.current?._close();\n  };\n\n  constructor(props: IProps) {\n    super(props);\n    this.state = {\n      data: null,\n    };\n  }\n\n  /**\n   * @param {IConfigToast} args\n   * @return {Promise<void>}\n   */\n  private _open = async (data: IConfigToast): Promise<void> => {\n    const { titleStyle, textBodyStyle } = this.props.config || {};\n    const timeout: number = typeof data.autoClose === 'number' ? data.autoClose : data.autoClose === false ? 0 : 5000;\n    await new Promise<void>((resolve) =>\n      this.setState((prevState) => ({ ...prevState, data: { titleStyle, textBodyStyle, ...data, description: data.textBody, timeout } }), resolve)\n    );\n    this.state.data?.onShow?.();\n  };\n\n  /**\n   * @return {Promise<void>}\n   */\n  private _close = async (): Promise<void> => {\n    this._closedHandler();\n  };\n\n  private _closedHandler = async (): Promise<void> => {\n    const onHide = this.state.data?.onHide;\n    await new Promise<void>((resolve) => this.setState((prevState) => ({ ...prevState, data: null }), resolve));\n    onHide?.();\n  };\n\n  public render() {\n    const { data } = this.state;\n    if (!data) {\n      return null;\n    }\n    const { isDark, config: configGeneral } = this.props;\n    return (\n      <SafeAreaInsetsContext.Consumer>\n        {(insets) => <ToastRender {...data} isDark={isDark} paddingTop={insets?.top} configGeneral={configGeneral} onClose={this._closedHandler} />}\n      </SafeAreaInsetsContext.Consumer>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}